<h2>スケジュール一覧</h2>
<% if flash[:success] %>
  <p class="success">
    <%= flash[:success] %>
  </p>
<% elsif flash[:failure] %>
  <p class="failure">
    <%= flash[:failure] %>
  </p>
<% end %>
<table>
  <thead>
     <tr>
      <th>ID</th>
      <th>タイトル</th>
      <th>開始日</th>
      <th>終了日</th>
      <th>終日</th>
      <th>スケジュール更新日時</th>
      <th>確認</th>
      <th>編集</th>
      <th>削除</th>
      </tr>
  </thead>
  <tbody>
     <% if @posts.count > 0 %>
      <% @posts.each do |post| %>
        <tr>
          <td>
            <%= post.id %>
          </td>
            
          <td>
            <%= post.title %>
          </td>
            
          <td>
            <%= post.start_at.strftime("%Y年%m月%d日") %>
          </td>
            
          <td>
            <%= post.end_at.strftime("%Y年%m月%d日") %>
          </td>
            
          <td>
            <% if post.is_all_day %>
              <string>○</string>
            <% end %>
          </td>
            
          <td>
            <%= post.updated_at.strftime("%Y年%m月%d日%H時%M分") %>            
          </td>
            
          <td>
            <%= link_to "確認", post_path(post) %>
          </td>
            
          <td>
            <%= link_to "編集", edit_post_path(post) %>
          </td>
            
          <td>
            <%= link_to "削除", post_path(post), method: :delete , data: {confirm: "本当に削除しますか？"} %>
          </td>
        </tr>
      <% end %>
    <% else %>
      <td colspan= "9">現在登録しているスケジュールはありません</td>
    <% end %>
  </tbody>
</table>

<p>
  <%= link_to("スケジュール新規登録", "/posts/new") %>
</p>

<footer>
   <h1>現在の日時: <%= Date.current.strftime("%Y年%m月%d日") %>  スケジュール合計:<%= @posts.all.count %></h1>
</footer>